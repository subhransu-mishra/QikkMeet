@import "tailwindcss";

@layer base {
  /* Set app-wide theme without forcing color on every element */
  html,
  body,
  #root {
    background-color: #000000;
    color: #ffffff;
  }

  /* remove the global wildcard color rule to avoid overriding button text */
  /* previously: * { color: white; } */

  input::placeholder {
    color: #9ca3af;
  }

  /* Force dark styling for select dropdowns */
  select {
    color-scheme: dark;
  }

  select option {
    background-color: #1a1a1a;
    color: #ffffff;
    padding: 8px;
  }

  /* Safe area insets for mobile devices with notches */
  .safe-area-inset-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* Stream Chat overrides */
@layer components {
  /* Stream Chat - unify to pure black */
  .str-chat,
  .str-chat__theme-dark,
  .str-chat__channel,
  .str-chat__main-panel,
  .str-chat__message-list,
  .str-chat__window,
  .str-chat__list,
  .str-chat__date-separator,
  .str-chat__thread,
  .str-chat__virtual-message-list,
  .str-chat__container,
  .str-chat__panel {
    background-color: #000000 !important;
    color: #ffffff !important;
  }

  /* Ensure text is visible in chat */
  .str-chat__message-text,
  .str-chat__message-text-inner,
  .str-chat__message,
  .str-chat__message-simple,
  .str-chat__message-simple__text,
  .str-chat__message__text {
    color: #ffffff !important;
  }

  /* Ensure message bubbles are visible */
  .str-chat__message-simple__text,
  .str-chat__message-simple__text-inner {
    color: #ffffff !important;
  }

  /* Message input area - black with subtle border */
  .str-chat__message-input,
  .str-chat__message-input-flat,
  .str-chat__message-input--emojis {
    background-color: #000000 !important;
    border-top: 1px solid rgba(255, 255, 255, 0.08) !important;
  }

  /* Send button - improved look */
  .str-chat__message-input__send-button button,
  .str-chat__send-button,
  .str-chat__message-input__button--send,
  button[data-testid="send-button"],
  button[data-testid="message-input-send-button"] {
    background-color: #ffffff !important;
    color: #000000 !important;
    width: 48px !important;
    height: 48px !important;
    min-width: 48px !important;
    min-height: 48px !important;
    border-radius: 9999px !important;
    border: none !important;
    box-shadow: 0 6px 16px rgba(255, 255, 255, 0.08) !important;
    transition: transform 150ms ease, filter 150ms ease !important;
  }

  .str-chat__message-input__send-button button:hover,
  .str-chat__send-button:hover,
  .str-chat__message-input__button--send:hover,
  button[data-testid="send-button"]:hover,
  button[data-testid="message-input-send-button"]:hover {
    filter: brightness(0.95);
    transform: translateY(-1px);
  }

  .str-chat__message-input__send-button button svg,
  .str-chat__send-button svg,
  .str-chat__message-input__button--send svg,
  button[data-testid="send-button"] svg,
  button[data-testid="message-input-send-button"] svg {
    color: #000000 !important;
    fill: currentColor !important;
    width: 22px !important;
    height: 22px !important;
  }

  /* Remove unwanted paddings/margins on small devices */
  @media (max-width: 768px) {
    .str-chat__container,
    .str-chat__window,
    .str-chat__main-panel,
    .str-chat__list,
    .str-chat__message-list {
      padding: 0 !important;
      margin: 0 !important;
      border: 0 !important;
    }

    .str-chat__message-input,
    .str-chat__message-input-flat {
      padding-left: 8px !important;
      padding-right: 8px !important;
      border-radius: 0 !important;
    }
  }
}

/* Stream Video SDK - Complete Override for Dark Theme */
/* CRITICAL: Stream's CSS is imported in main.jsx BEFORE this file */

/* Set CSS variables for Stream Video theme - following official docs */
.str-video {
  --str-video__primary-color: #ffffff;
  --str-video__secondary-color: #000000;
  --str-video__background-color: #000000;
  --str-video__text-color: #ffffff;

  /* Button colors */
  --str-video__call-controls-button-color: #ffffff;
  --str-video__call-controls-button-background-color: #ffffff;

  /* Icon colors */
  --str-video__icon-color: #000000;
}

/* Main video container */
.str-video,
.str-video__container {
  background: #000000 !important;
  color: #ffffff !important;
}

/* Speaker layout background */
.str-video__speaker-layout,
.str-video__speaker-layout__wrapper {
  background: #000000 !important;
}

/* Call controls container - dark background at bottom */
.str-video__call-controls,
.str-video__call-controls__wrapper {
  background: rgba(0, 0, 0, 0.95) !important;
  backdrop-filter: blur(10px) !important;
  padding: 20px 24px !important;
  border-top: 1px solid rgba(255, 255, 255, 0.1) !important;
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  gap: 12px !important;
}

/* CRITICAL FIX: All call control buttons - white background with black icons */
.str-video__call-controls button,
.str-video__call-controls__button,
.str-video__composite-button,
.str-video button[class*="button"],
button[class*="str-video__"],
.str-video [role="button"] {
  background-color: #ffffff !important;
  color: #000000 !important;
  border: none !important;
  border-radius: 50% !important;
  width: 56px !important;
  height: 56px !important;
  min-width: 56px !important;
  min-height: 56px !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  transition: all 0.2s ease !important;
  cursor: pointer !important;
  padding: 0 !important;
  margin: 0 4px !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
}

/* Button hover state */
.str-video__call-controls button:hover,
.str-video__call-controls__button:hover,
.str-video__composite-button:hover,
button[class*="str-video"][class*="button"]:hover {
  background-color: #e5e5e5 !important;
  transform: scale(1.05) !important;
}

/* CRITICAL: SVG icons inside buttons - must be black and visible */
.str-video__call-controls button svg,
.str-video__call-controls__button svg,
.str-video__composite-button svg,
button[class*="str-video"] svg,
.str-video__icon,
.str-video__call-controls svg,
.str-video [role="button"] svg,
.str-video button svg {
  color: #000000 !important;
  fill: #000000 !important;
  stroke: #000000 !important;
  width: 24px !important;
  height: 24px !important;
  min-width: 24px !important;
  min-height: 24px !important;
}

/* SVG paths inside icons - force black color */
.str-video__call-controls button svg path,
.str-video__call-controls svg path,
.str-video button svg path,
.str-video [role="button"] svg path {
  fill: #000000 !important;
  stroke: #000000 !important;
}

/* Active/pressed state for buttons */
.str-video__call-controls button[data-active="true"],
.str-video__call-controls button.active,
button[class*="str-video"][class*="button"][data-active="true"] {
  background-color: #3b82f6 !important;
}

.str-video__call-controls button[data-active="true"] svg,
button[class*="str-video"][class*="button"][data-active="true"] svg {
  color: #ffffff !important;
  fill: #ffffff !important;
  stroke: #ffffff !important;
}

/* Leave/Hangup button - RED background with white icon */
.str-video__call-controls button[data-testid*="leave"],
.str-video__call-controls button[data-testid*="hangup"],
.str-video__call-controls__button--leave,
button[aria-label*="Leave"],
button[aria-label*="leave"],
button[class*="leave"],
button[class*="hangup"] {
  background-color: #ef4444 !important;
}

.str-video__call-controls button[data-testid*="leave"]:hover,
.str-video__call-controls button[data-testid*="hangup"]:hover,
button[aria-label*="Leave"]:hover,
button[aria-label*="leave"]:hover {
  background-color: #dc2626 !important;
}

.str-video__call-controls button[data-testid*="leave"] svg,
.str-video__call-controls button[data-testid*="hangup"] svg,
button[aria-label*="Leave"] svg,
button[aria-label*="leave"] svg,
button[class*="leave"] svg,
button[class*="hangup"] svg {
  color: #ffffff !important;
  fill: #ffffff !important;
  stroke: #ffffff !important;
}

/* Participant video tiles */
.str-video__participant-view,
.str-video__participant-tile {
  border-radius: 12px !important;
  border: 2px solid rgba(255, 255, 255, 0.1) !important;
  overflow: hidden !important;
  background: #1a1a1a !important;
}

/* Participant name labels */
.str-video__participant-details,
.str-video__participant-label {
  background: rgba(0, 0, 0, 0.8) !important;
  backdrop-filter: blur(8px) !important;
  color: #ffffff !important;
  padding: 6px 12px !important;
  border-radius: 6px !important;
  font-size: 14px !important;
  font-weight: 500 !important;
}

/* Video element itself */
.str-video__participant-view video {
  object-fit: cover !important;
  width: 100% !important;
  height: 100% !important;
}

/* Ensure proper z-index for controls */
.str-video__call-controls {
  position: relative !important;
  z-index: 10 !important;
}

@keyframes skew-loader {
  0%,
  100% {
    transform: skewX(0deg) scale(1);
    opacity: 1;
  }
  50% {
    transform: skewX(20deg) scale(0.8);
    opacity: 0.6;
  }
}

.animate-skew-loader {
  animation: skew-loader 1.2s ease-in-out infinite;
}
